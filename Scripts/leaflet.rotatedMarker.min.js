(function(){var n=L.Marker.prototype._initIcon,t=L.Marker.prototype._setPos,i=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var t=this.options.icon&&this.options.icon.options,n=t&&this.options.icon.options.iconAnchor;n&&(n=n[0]+"px "+n[1]+"px");this.options.rotationOrigin=this.options.rotationOrigin||n||"center bottom";this.options.rotationAngle=this.options.rotationAngle||0;this.on("drag",function(n){n.target._applyRotation()})});L.Marker.include({_initIcon:function(){n.call(this)},_setPos:function(n){t.call(this,n);this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(n){return this.options.rotationAngle=n,this.update(),this},setRotationOrigin:function(n){return this.options.rotationOrigin=n,this.update(),this}})})();