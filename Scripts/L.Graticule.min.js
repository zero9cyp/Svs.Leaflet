L.Graticule=L.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize:function(n){L.Util.setOptions(this,n);this._layers={};this.options.sphere?this.addData(this._getFrame()):this.addData(this._getGraticule())},_getFrame:function(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule:function(){for(var n,i=[],r=this.options.interval,t=0;t<=180;t=t+r)i.push(this._getFeature(this._getMeridian(t),{name:t?t.toString()+"째 E":"Prime meridian"})),t!==0&&i.push(this._getFeature(this._getMeridian(-t),{name:t.toString()+"째 W"}));for(n=0;n<=90;n=n+r)i.push(this._getFeature(this._getParallel(n),{name:n?n.toString()+"째 N":"Equator"})),n!==0&&i.push(this._getFeature(this._getParallel(-n),{name:n.toString()+"째 S"}));return{type:"FeatureCollection",features:i}},_getMeridian:function(n){var i,t;for(n=this._lngFix(n),i=[],t=-90;t<=90;t++)i.push([n,t]);return i},_getParallel:function(n){for(var i=[],t=-180;t<=180;t++)i.push([this._lngFix(t),n]);return i},_getFeature:function(n,t){return{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:t}},_lngFix:function(n){return n>=180?179.999999:n<=-180?-179.999999:n}});L.graticule=function(n){return new L.Graticule(n)};